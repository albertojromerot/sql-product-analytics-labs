# SQL Product Analytics Labs

[![Notebooks](https://github.com/albertojromerot/sql-product-analytics-labs/actions/workflows/reports.yml/badge.svg)](https://github.com/albertojromerot/sql-product-analytics-labs/actions/workflows/reports.yml)

A recruiter-friendly, end-to-end SQL analytics showcase that starts with synthetic e-commerce data, walks through DuckDB notebooks, and ends with ready-to-share HTML reports and Power BI theming.

> Text-only initial scaffold: CI will generate PNGs and HTML reports after this PR is opened.

## Artifacts (generated by CI after PR open)
- üìÑ Notebook HTML previews will be published to `reports/samples/` and linked from the PR checks.
- üñºÔ∏è PNG charts for README snippets will be written to `assets/` by the executed notebooks.

## Data model
```mermaid
erDiagram
  customers ||--o{ orders : places
  orders ||--|{ order_items : contains
  customers ||--o{ events : triggers
  customers ||--o{ marketing_experiments : exposed_to
  products ||--o{ order_items : bought
```

## Repo tour
- `src/generate_data.py` ‚Äì deterministic data generator producing full and sample CSVs plus schema/seed SQL.
- `data/samples/` ‚Äì lightweight CSVs preloaded into the notebooks (generated by CI).
- `sql/` ‚Äì schema and DuckDB COPY commands for quick setup.
- `notebooks/` ‚Äì four guided analyses (joins, window functions, CTE funnels, A/B testing).
- `reports/samples/` ‚Äì HTML reports deposited by CI for quick viewing; `reports/latest/` holds fresh CI artifacts.
- `assets/` ‚Äì PNG exports from the notebooks for README and decks, generated during CI runs.
- `.devcontainer/` ‚Äì VS Code dev container for a consistent Python 3.10 toolchain.
- `.github/workflows/reports.yml` ‚Äì CI to regenerate data and HTML artifacts.

## Data volumes
- ~20k customers, ~30k orders (with guaranteed line items) across 24 months.
- ~80k behavioral events and ~30k marketing experiment participants.
- Samples (500 rows) live in `data/samples/` for quick DuckDB demos; full CSVs regenerate into `data/synthetic/`.

## Quickstart
1. Clone and open in VS Code Dev Containers or install the dependencies from `requirements.txt`.
2. Run `python src/generate_data.py` to build deterministic synthetic data and refresh `sql/seed.sql`.
3. Execute notebooks with `jupyter nbconvert --to html --execute notebooks/*.ipynb --output-dir reports/latest`.
4. Open the HTML reports in `reports/latest/`; CI will also publish a `reports/samples/` snapshot for browsing.

## CI pipeline
- GitHub Actions (`.github/workflows/reports.yml`) regenerates the synthetic data, executes all notebooks headlessly, saves fresh HTML to `reports/latest/`, and publishes them as build artifacts.
- The same workflow keeps the schema and seed SQL in sync with the generated samples.
